disabled = false;
demo = false;

supportQCParameters = false;
id = "fmi::observations::wave::multipointcoverage";

expiresSeconds = 1800;

constructor_name = "wfs_obs_handler_factory";

title:
{
	eng = "Wave and Water temperature observations";
	fin = "Aallokko- ja pintalämpötilahavainnot";
};

abstract:
{
	eng = "Wave and water temperature observations from buoys. Available parameters are significant wave height, wave direction, deviation of wave direction, modal period and water temperature. Some buoys return only temperature values. Time step is 30 minutes. The data is returned in multipointcoverage format.";
	fin = "Aallokko- ja pintalämpötilahavaintoja poijuilta. Saatavilla olevia parametreja ovat merkitsevä aallonkorkeus, aallokon tulosuunta, tulosuunnan hajonta, modaalinen periodi sekä vedenlämpötila. Osalta pojusta on saatavilla vain lämpötila. Aika-askel on 30 minuuttia. Data palautetaan 'multipointcoverage'-tyyppisenä.";
};

template = "weather_observations_grid.c2t";

parameters:
(
{
	name = "starttime";
	title = {eng = "Begin of the time interval"; fin = "Alkuaika"; };
	abstract = { eng = "Parameter begin specifies the begin of time interval in ISO-format (for example 2012-02-27T00:00:00Z)."; fin = "Aikajakson alkuaika ISO-muodossa (esim. 2012-02-27T00:00:00Z)."; };
	xmlType = "dateTime";
	type = "time";
	lowerLimit = "1996-01-01T00:00:00";
},

{
	name = "endtime";
	title = { eng = "End of time interval"; fin = "Loppuaika"; };
	abstract = { eng = "End of time interval in ISO-format (for example 2012-02-27T00:00:00Z)."; fin = "Aikajakson loppuaika ISO-muodossa (esim. 2012-02-27T00:00:00Z)."; };
	xmlType = "dateTime";
	type = "time";
},
{
	name = "timestep";
	title = { eng = "The time step of data in minutes"; fin= "Aika-askel minuutteina";};
	abstract = { eng = "The time step of data in minutes. Notice that timestep is calculated from start of the ongoing hour or day. "; fin= "Aika-askel minuutteina. Huomaa, että aika-askel lasketaan tasaminuuteille edellisestä tasatunnista tai vuorokaudesta.";};
	xmlType = "int";
	type = "uint";
},
{
	name = "parameters";
	title = { eng = "Parameters to return"; fin = "Meteorologiset parametrit"; };
	abstract = { eng = "Comma separated list of meteorological parameters to return."; fin = "Meteorologiset parametrit pilkulla erotettuna.";};
	xmlType = "NameList";
	type = "string[1..99]";
	minOccurs = 0;
	maxOccurs = 999;
},
{
        name = "crs";
        title = { eng = "Coordinate projection to use in results"; fin = "Projektio"; };
        abstract = { eng = "Coordinate projection to use in results. For example EPSG::3067"; fin = "Projektiotieto. Esimerkiksi EPSG::3067";};
        xmlType = "xsi:string";
        type = "string";
},
{
	name = "fmisid";
	title = { eng = "FMI observation station identifier."; fin = "Säähavaintoaseman id.";  };
	abstract = { eng = "Identifier of the observation station."; fin = "Säähavaintoaseman id."; };
	xmlType = "int";
	type = "uint";
	minOccurs = 0;
	maxOccurs = 99;
}
);

returnTypeNames = [ "omso:GridSeriesObservation" ];

handler_params:
{
        latest = false;
	beginTime = "${starttime: 12 hour ago rounded down 30 min}";
        endTime = "${endtime: now rounded down 30 min}";
        places = [];
        latlons = [];
        meteoParameters = ["${parameters > defaultMeteoParam}"];
        stationType = "opendata_buoy";
        timeStep = "${timestep:0}";
        maxDistance = 50000.0;
        wmos = [];
        lpnns = [];
        fmisids = ["${fmisid > defaultSids}"];
        geoids = [];
        numOfStations = 1;
        hours = [];
        weekDays = [];
        locale = "fi_FI.utf8";
        missingText = "NaN";
        boundingBox = "${}";
        maxEpochs = 2000;
        crs = "${crs:EPSG::4258}";
        timeZone = "UTC";
        qualityInfo = false;
        keyword_overwritable = false;
	keyword = "";
};

named_params = (
    {
	name = "defaultSids";
	def = [134221, 134220, 134246, 137228, 103976, 100761, 103807, 103808, 654900, 654910, 654923, 104600];
    },
    {
        name = "defaultMeteoParam";
        def = ["WaveHs", "ModalWDi", "TWATER", "WTP", "WHDD"];
    }

);

separateGroups = false;
